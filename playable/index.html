<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Crada Playable</title>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta
			name="viewport"
			content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, width=device-width, height=device-height, viewport-fit=cover, user-scalable=no"
		/>
		<meta name="mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
	</head>

	<body ondragstart="return false;" ondrop="return false;">
		<div id="main">
			<div id="canvas3d"></div>
			<div id="canvas2d"></div>
		</div>

		<script>
			window.addEventListener('load', initApplication);

			function initApplication() {
				window.removeEventListener('load', initApplication);

				// Ждем, пока app будет создан в index.mjs
				const checkApp = () => {
					if (typeof app !== 'undefined') {
						app.settings.store = {
							ios: 'blank',
							android: 'blank',
						};
						app.settings.titleKey = 'playable';
						app.settings.language = 'en';
						app.settings.platform = 'dev';
						Object.freeze(app.settings);

						app.init();

						globalThis.__PIXI_APP__ = app.pixi.app;

						// PIXIDevTool для разработки
						if (typeof PIXIDevTool !== 'undefined') {
							new PIXIDevTool();
						}
					} else {
						// Если app еще не создан, ждем еще немного
						setTimeout(checkApp, 100);
					}
				};

				checkApp();
			}
		</script>

		<script type="module" src="./index.mjs"></script>
	</body>
</html>
